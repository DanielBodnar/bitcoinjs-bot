<html>
<title>BitcoinJS-Bot</title>
<head>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="./stylesheet.css">

<script>
$.getJSON("http://localhost:8000/tweets", function(tweets) {
  var obj = []
  obj = tweets;

  var tbl=$("<table/>").attr("id","mytable").attr("class","table table-striped");
  var tableHeading = "<tr><th>Date</th><th>Time</th><th>User</th><th>Tweet Text</th><th>Sentiment</th></tr>";

  $("#name").append(tbl);
  $("#mytable").append(tableHeading);
    for(var i=0;i<obj.length;i++) {
      var d = new Date(obj[i]["apiData"]["created_at"]);
      var curr_year = d.getFullYear();
      var curr_month = d.getMonth();
      var curr_date = d.getDate();
      var curr_hour = d.getHours();
      var curr_min = d.getMinutes();
      var curr_sec = d.getSeconds();
      var curr_msec = d.getMilliseconds();

      var sValue = obj[i]["sentiment"]
      if ( obj[i]["sentiment"] > 0 ) { var sValue = "success" };
        if ( obj[i]["sentiment"] < 0 ) { var sValue = "danger" };
          if ( obj[i]["sentiment"] == 0 ) { var sValue = "" };

      var tr="<tr class='"+ sValue +"'>";
      var tr2="</tr>";
      var td1="<td>"+ curr_month +"-"+ curr_date +"</td>";
      var td2="<td>"+ curr_hour + ":" + curr_min + ":" + curr_sec + ":" + curr_msec +"</td>";
      var td3="<td>"+obj[i]["apiData"]["user"]["screen_name"]+"</td>";
      var td4="<td><a href='https://twitter.com/"+ obj[i]["apiData"]["user"]["screen_name"] +"/status/"+ obj[i]["apiData"]["id_str"] + "'>"+ obj[i]["apiData"]["text"] +"</a></td>";
      var td5="<td>"+ obj[i]["sentiment"] +"</td>";
      
     $("#mytable").append(tr+td1+td2+td3+td4+td5+tr2); }
});
</script>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">BitcoinJS-Bot</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="/">Home</a></li>
          <li class="dropdown active">
            <a href="/" class="dropdown-toggle" data-toggle="dropdown">Twitter <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="/">Overview </a></li>
              <li><a href="/tweets">API / JSON</a></li>
            </ul>
          </li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>



<div id="name"></div>



</body>
</html>
<html>
<title>BitcoinJS-Bot</title>
<head>

<% include ./partials/head %>

<script>
$.getJSON("http://localhost:8000/tweets", function(tweets) {
  var obj = []
  obj = tweets;

  var tbl=$("<table/>").attr("id","mytable").attr("class","table table-striped");
  var tableHeading = "<tr><th>Date</th><th>Time</th><th>User</th><th>Tweet Text</th><th>Sentiment</th></tr>";

  $("#name").append(tbl);
  $("#mytable").append(tableHeading);
    for(var i=0;i<obj.length;i++) {
      var d = new Date(obj[i]["apiData"]["created_at"]);
      var curr_year = d.getFullYear();
      var curr_month = d.getMonth();
      var curr_date = d.getDate();
      var curr_hour = d.getHours();
      var curr_min = d.getMinutes();
      var curr_sec = d.getSeconds();
      var curr_msec = d.getMilliseconds();

      var sValue = obj[i]["sentiment"]
      if ( obj[i]["sentiment"] > 0 ) { var sValue = "success" };
        if ( obj[i]["sentiment"] < 0 ) { var sValue = "danger" };
          if ( obj[i]["sentiment"] == 0 ) { var sValue = "" };

      var tr="<tr class='"+ sValue +"'>";
      var tr2="</tr>";
      var td1="<td>"+ curr_month +"-"+ curr_date +"</td>";
      var td2="<td>"+ curr_hour + ":" + curr_min + ":" + curr_sec + ":" + curr_msec +"</td>";
      var td3="<td>"+obj[i]["apiData"]["user"]["screen_name"]+"</td>";
      var td4="<td><a href='https://twitter.com/"+ obj[i]["apiData"]["user"]["screen_name"] +"/status/"+ obj[i]["apiData"]["id_str"] + "'>"+ obj[i]["apiData"]["text"] +"</a></td>";
      var td5="<td>"+ obj[i]["sentiment"] +"</td>";
      
     $("#mytable").append(tr+td1+td2+td3+td4+td5+tr2); }
});
</script>
</head>
<body>

<header>
  <% include ./partials/header %>
</header>

<div id="name"></div>

<footer>
  <% include ./partials/footer %>
</footer>

</body>
</html>